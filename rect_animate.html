<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2017 by anonymous (http://jsbin.com/honipuwejo/1/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>


<style id="jsbin-css">
body{
  background: #eee;
}
</style>
</head>
<body>

<script id="jsbin-javascript">
var svg = d3.select("body").append("svg").attr({
   width: "340",
   height: "340"
});

svg.append("g").append("rect").attr({
  fill: "white",
  width: "100%",
  height: "100%"
});

//--------------------------------

var arr = [120,200,240,175,80];

bind(arr);
render();

function bind(arr){
  var selection = d3.select("svg").selectAll("rect#bar").data(arr);
  // 初始化設定
  selection.enter().append("rect").attr({
        id: "bar",
        x: 20,
        y: function(d,i){
           return 20+i*35;
        },
        height: 30,
        width: 30,
        fill: "rgb(255,0,0)"
   });
  selection.exit().remove();
} 

function render(){

  
  //不需要動畫的設定
  d3.select("svg").selectAll("rect#bar").on("click",render);
     
    
  //需要動畫的設定
  d3.selectAll("rect#bar")
    .attr({x: 20})
    .transition().duration(1000)
    .ease("circle")
    .delay(function(d,i){
      return i*1000
  })
    .attr({x: 300,fill:"gold"});
}
</script>
</body>
</html>